<div class="main-content">
  <div class="header">
    <p>Lista de Estudantes</p>
  </div>

  <div class="filter">
    <input (ngModelChange)="search()" [(ngModel)]="searchValue" nz-input placeholder="Pesquisar..." type="text" />
    <button (click)="openStudentDrawer()" nz-button nzType="primary">Novo Estudante</button>
  </div>

  <div class="table-container">
    <div class="table-scroll">
      <nz-table [nzData]="listOfDisplayData" [nzScroll]="{ x: '800px', y: '300px' }" nzTableLayout="fixed">
        <thead>
        <tr>
          <th>Nome</th>
          <th>Nº Estudante</th>
          <th>BI</th>
          <th>Data Nasc.</th>
          <th>Endereço</th>
          <th>Nível Acadêmico</th>
          <th>Inglês</th>
          <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let student of listOfDisplayData">
          <td>{{ student.nome }}</td>
          <td>{{ student.numeroEstudante }}</td>
          <td>{{ student.bi }}</td>
          <td>{{ student.dataNascimento | date: 'dd/MM/yyyy' }}</td>
          <td>{{ student.endereco }}</td>
          <td>{{ student.nivelAcademico }}</td>
          <td>{{ student.ultimoNivelIngles }}</td>
          <td>
            <button (click)="printStudent(student)" nz-button nzType="link" nzSize="small">
              <nz-icon nzType="printer" nzTheme="outline"></nz-icon>
            </button>

            <button (click)="editStudent(student)" nz-button nzType="link" nzSize="small">
              <nz-icon nzType="edit" nzTheme="outline"></nz-icon>
            </button>

            <button (click)="deleteStudent(student)" nz-button nzType="link" nzDanger nzSize="small">
              <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
            </button>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>

<nz-drawer
  [nzVisible]="isStudentDrawerVisible"
  [nzTitle]="studentDrawerTitle"
  [nzWidth]="500"
  [nzFooter]="drawerFooter"
  (nzOnClose)="closeStudentDrawer()"
>
  <form *nzDrawerContent [formGroup]="studentForm" nz-form>
    <nz-form-item *ngFor="let field of [
        { name: 'nome', label: 'Nome' },
        { name: 'numeroEstudante', label: 'Número do Estudante' },
        { name: 'bi', label: 'BI' },
        { name: 'dataNascimento', label: 'Data de Nascimento', type: 'date' },
        { name: 'endereco', label: 'Endereço' },
        { name: 'nivelAcademico', label: 'Nível Acadêmico' }
      ]">
      <nz-form-label [nzFor]="field.name" nzRequired>{{ field.label }}</nz-form-label>
      <nz-form-control>
        <input
          *ngIf="!field.type"
          [formControlName]="field.name"
          [id]="field.name"
          nz-input
          [placeholder]="field.label"
        />
        <input
          *ngIf="field.type === 'date'"
          [formControlName]="field.name"
          [id]="field.name"
          nz-input
          type="date"
        />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label nzRequired>Último Nível de Inglês</nz-form-label>
      <nz-form-control>
        <nz-select formControlName="ultimoNivelIngles" nzPlaceHolder="Selecione o nível">
          <nz-option nzLabel="A1" nzValue="A1"></nz-option>
          <nz-option nzLabel="A2" nzValue="A2"></nz-option>
          <nz-option nzLabel="B1" nzValue="B1"></nz-option>
          <nz-option nzLabel="B2" nzValue="B2"></nz-option>
          <nz-option nzLabel="C1" nzValue="C1"></nz-option>
          <nz-option nzLabel="C2" nzValue="C2"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
  </form>

  <ng-template #drawerFooter>
    <button nz-button (click)="closeStudentDrawer()">Cancelar</button>
    <button nz-button nzType="primary" (click)="submitStudent()" [disabled]="!studentForm.valid">Salvar</button>
  </ng-template>
</nz-drawer>
